{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,mEAIMC,EAAmBC,SAASC,cAAc,mBAC1CC,EAAuBF,SAASC,cAAc,2BAI9CE,GAFcH,SAASC,cAAc,gBAEzBD,SAASC,cAAc,oBAErCG,EAAY,GAEhBD,EAAUE,iBAAiB,QAASR,EAAAS,eAKhB,IAAdC,EAAkBP,SAASC,cAAc,iBACzCO,EAAmBR,SAASC,cAAc,yBAE1CQ,EAAgB,IAAI,EAAAC,EAAAC,eAAcJ,EAAiBC,GAEzDA,EAAiBH,iBAAiB,SAAUI,EAAcG,eAC1DL,EAAgBF,iBAAiB,SAAUI,EAAcG,eAEzDH,EAAcI,cAQd,IAAMC,EAAOd,SAASC,cAAc,QAChCc,EAAoB,GAqFxB,SAASC,EAAsBC,GAE7B,GAA6B,cAAzBA,EAAIC,OAAOC,UAA2B,C,IAEtCC,EACAC,EACAC,EAHIC,GACuB,QAA3BH,EAAAH,EAAIC,OAAOM,QAAQ,gBAAQ,IAA3BJ,OAAA,EAAAA,EAA6BK,MACF,QAA3BJ,EAAAJ,EAAIC,OAAOM,QAAQ,gBAAQ,IAA3BH,OAAA,EAAAA,EAA6BK,aACF,QAA3BJ,EAAAL,EAAIC,OAAOM,QAAQ,gBAAQ,IAA3BF,OAAA,EAAAA,EAA6BK,KACzBC,EAAab,GACnB,EAAAc,EAAAC,yBAAwB,CACtBF,aACAL,oB,GA5FN,WACE,IAAMQ,EAAYC,aAAaC,QA/BH,aAiC5B,GAAKF,EAEE,CACN,IAAMG,EAAkBC,KAAKC,MAAML,GAE5BM,EAAgBC,OAAOC,KAAKL,GAElCpB,EAAKT,iBAAiB,QAAQW,G,IAGzBwB,GAAiB,EAAjBC,GAAiB,EAAjBC,OAAiBC,E,IAAtB,QAAKC,EAAAC,EAAqBR,EAAaS,OAAAC,cAAlCP,GAAAI,EAAAC,EAAiBG,QAAAC,MAAjBT,GAAiB,EAAmB,CAApC,IAAMU,EAANN,EAAiBO,MACdC,EAAiBlB,EAAgB,GAAemB,OAAZH,IAE1CnC,EAAkBuC,KAAKF,GACvB,IACEG,EAcEH,EAdFG,SACAC,EAaEJ,EAbFI,SACAC,EAYEL,EAZFK,eACAC,EAWEN,EAXFM,QACAC,EAUEP,EAVFO,aACAC,EASER,EATFQ,MACAC,EAQET,EARFS,SACAC,EAOEV,EAPFU,MACAC,EAMEX,EANFW,WACAC,EAKEZ,EALFY,IACAC,EAIEb,EAJFa,QACAxC,EAGE2B,EAHF3B,GACAE,EAEEyB,EAFFzB,IACAD,EACE0B,EADF1B,UAGIwC,EAAYzC,GAAME,GAAOD,EACzByC,GAAgB,EAAAC,EAAAC,SAAuBZ,GAAkBD,GACzDc,EAAcZ,GAAWC,EACzBY,EAAeX,GAASC,EAASW,KACjCC,EAAmBlB,EACnBmB,EAAqBV,GAAOC,EAE9BU,EAAS,GAI6B,IACpCT,IAAczC,IAChBkD,EAASb,EAAM,GAAG,kBAAkB,GAAGE,IACvCY,QAAQC,IAAIF,IAEVT,IAAcxC,IAChBiD,EAASZ,EAAW,GAAGC,IACvBY,QAAQC,IAAIF,IAEVT,IAAcvC,IAChBgD,EAAS,2BAA6BZ,EAAW,GAAGC,IACpDY,QAAQC,IAAIF,G,CAKd,MAAOG,GACPH,EACE,0F,CAIJ5E,EAAiBgF,UAAY3E,IAAa,EAAA4E,EAAAX,SAAa,CACrDF,gBACAG,cACAC,eACAE,mBACAC,qBACAC,SACAT,a,WA7DCzB,GAAiB,EAAjBC,EAAiBuC,C,aAAjBzC,GAAiB,MAAjBK,EAAiBqC,QAAjBrC,EAAiBqC,Q,YAAjBzC,E,MAAAC,C,QATLxC,EAAqBiF,MAAMC,QAAU,O,CA4EzCC,E","sources":["src/favorite.js"],"sourcesContent":["import { onSearchClick } from './js/header';\nimport { ThemeSwitcher } from './js/themeSwitcher';\nimport { calendar } from './js/calendar';\n\nconst newsContainerRef = document.querySelector('.news_container');\nconst withoutNewsContainer = document.querySelector('.without-news_container');\n// const body = document.querySelector('body');\nconst searchInput = document.querySelector('.search_form');\nconst STORAGE_FAVORITES_KEY = 'favorites';\nconst btnSearch = document.querySelector('.search_mob_btn');\n\nlet markupAll = '';\n\nbtnSearch.addEventListener('click', onSearchClick);\n\n\n//============= перемикач теми початок ==========\n\nconst themeSwitcherEl = document.querySelector('.switch_input');\nconst mobileSwitcherEl = document.querySelector('.switch_input--mobile');\n\nconst themeSwitcher = new ThemeSwitcher(themeSwitcherEl, mobileSwitcherEl);\n\nmobileSwitcherEl.addEventListener('change', themeSwitcher.onThemeToggle);\nthemeSwitcherEl.addEventListener('change', themeSwitcher.onThemeToggle);\n\nthemeSwitcher.renderTheme();\n//============= перемикач теми кінець ============\n\nimport publishedDateFormatter from './js/publishedDateFormatter';\nimport createmarkup from './js/news-card';\nimport { setFavoritesInLocalStor } from './index.js';\n\n\nconst body = document.querySelector('body');\nlet favoritesArrFedor = [];\n\n\nfunction addFavorite() {\n  const favorites = localStorage.getItem(STORAGE_FAVORITES_KEY);\n\n  if (!favorites) {\n    withoutNewsContainer.style.display = 'block';\n  } else {\n   const parsedFavorites = JSON.parse(favorites);\n    \n    const favoritesKeys = Object.keys(parsedFavorites);\n   \n    body.addEventListener('click',onAddToFavoritesClick);\n\n\n    for (const favoriteKey of favoritesKeys) {\n      const parsedFavorite = parsedFavorites[`${favoriteKey}`];\n\n      favoritesArrFedor.push(parsedFavorite);\n      const {\n        abstract,\n        pub_date,\n        published_date,\n        section,\n        section_name,\n        title,\n        headline,\n        media,\n        multimedia,\n        url,\n        web_url,\n        id,\n        _id,\n        slug_name,\n      } = parsedFavorite;\n\n      const articleId = id || _id || slug_name;\n      const publishedDate = publishedDateFormatter(published_date || pub_date);\n      const sectionName = section || section_name;\n      const articleTitle = title || headline.main;\n      const shortDescription = abstract;\n      const urlOriginalArticle = url || web_url;\n\n      let imgUrl = '';\n      \n\n      //   перевіряемо чи є зображення, де помилка там є відео\n      try {\n        if (articleId === id) {\n          imgUrl = media[0]['media-metadata'][2].url;\n          console.log(imgUrl);\n        }\n        if (articleId === slug_name) {\n          imgUrl = multimedia[2].url;\n          console.log(imgUrl);\n        }\n        if (articleId === _id) {\n          imgUrl = 'https://www.nytimes.com/' + multimedia[0].url;\n          console.log(imgUrl);\n        }\n\n        //   якщо треба інший розмір картинки\n        // console.log(media[0]['media-metadata']);\n      } catch (error) {\n        imgUrl =\n          'https://t4.ftcdn.net/jpg/00/89/55/15/240_F_89551596_LdHAZRwz3i4EM4J0NHNHy2hEUYDfXc0j.jpg';\n      }\n\n\n      newsContainerRef.innerHTML = markupAll += createmarkup({\n        publishedDate,\n        sectionName,\n        articleTitle,\n        shortDescription,\n        urlOriginalArticle,\n        imgUrl,\n        articleId,\n      });\n    }\n  }\n}\n\naddFavorite();\n\nfunction onAddToFavoritesClick(evt) {\n\n  if (evt.target.className === 'card__btn') {\n    const clickedArticleId =\n      evt.target.closest('.card')?.id ||\n      evt.target.closest('.card')?.slug_name ||\n      evt.target.closest('.card')?._id;\n    const resultsArr = favoritesArrFedor\n    setFavoritesInLocalStor({\n      resultsArr,\n      clickedArticleId,\n    });\n  }\n}\n\n"],"names":["$i8Q71","parcelRequire","$19661b0c25203147$var$newsContainerRef","document","querySelector","$19661b0c25203147$var$withoutNewsContainer","$19661b0c25203147$var$btnSearch","$19661b0c25203147$var$markupAll","addEventListener","onSearchClick","$19661b0c25203147$var$themeSwitcherEl","$19661b0c25203147$var$mobileSwitcherEl","$19661b0c25203147$var$themeSwitcher","$3nfD2","ThemeSwitcher","onThemeToggle","renderTheme","$19661b0c25203147$var$body","$19661b0c25203147$var$favoritesArrFedor","$19661b0c25203147$var$onAddToFavoritesClick","evt","target","className","ref","ref1","ref2","clickedArticleId","closest","id","slug_name","_id","resultsArr","$fSCrk","setFavoritesInLocalStor","favorites","localStorage","getItem","parsedFavorites","JSON","parse","favoritesKeys","Object","keys","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","favoriteKey","value","parsedFavorite","concat","push","abstract","pub_date","published_date","section","section_name","title","headline","media","multimedia","url","web_url","articleId","publishedDate","$6F36k","default","sectionName","articleTitle","main","shortDescription","urlOriginalArticle","imgUrl","console","log","error","innerHTML","$lyUNr","err","return","style","display","$19661b0c25203147$var$addFavorite"],"version":3,"file":"favorite.23dd5579.js.map"}
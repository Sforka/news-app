{"mappings":"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","sources":["src/js/news-card.js","src/js/header.js","node_modules/@swc/helpers/lib/_define_property.js","src/js/currentPage.js","src/favorite.js","src/js/themeSwitcher.js"],"sourcesContent":["export default function createmarkup({\n  publishedDate,\n  sectionName,\n  articleTitle,\n  shortDescription,\n  urlOriginalArticle,\n  imgUrl,\n  articleId,\n}) {\n  let textLength = shortDescription;\n      if (shortDescription.length > 110) {\n          const spaceIndex = shortDescription.indexOf(\" \", 110);\n          if (spaceIndex > 0) {\n              textLength = shortDescription.slice(0, spaceIndex) + \"...\";\n          }\n      }\n  let titleLength = articleTitle;\n      if (articleTitle.length > 58) {\n        const spaceIndex = articleTitle.indexOf(' ', 44);\n        if (spaceIndex > 0) {\n          titleLength = articleTitle.slice(0, spaceIndex) + '...';\n        }\n      }\n\n  return `\n      <article class=\"card\" id=\"${articleId}\">\n        <div class=\"card__img-container\">\n          <img class=\"card__img\" src=\"${imgUrl}\" alt=\"${articleTitle}\">\n          <p class=\"card__section-name\">\n            ${sectionName}\n          </p>\n          <button class=\"card__btn\" type=\"button\">\n            Add to favorite <span class=\"card__btn-heart\">&#9825;</span>\n          </button>\n        </div>\n        <h2 class=\"card__title\">\n          ${titleLength}\n        </h2>\n        <p class=\"card__text\">${textLength}</p>\n        <div class=\"card__bottom\">\n          <span class=\"card__date\">\n            ${publishedDate}\n          </span>\n          <a class=\"card__read-more-search\"\n            href=\"${urlOriginalArticle}\" target=\"_blank\"\n          >\n            Read more\n          </a>\n        </div>\n      </article>\n    `;\n};\n  \n","const btnSearch = document.querySelector(\".search_mob_btn\");\nconst formSearch = document.querySelector(\".search_form\");\nconst inputSearch = document.querySelector(\".search_input\");\nconst btn = document.querySelector(\".search_btn\");\n\n// мобільне меню, для відкриття пошукової строки\nbtnSearch.addEventListener(\"click\", onSearchClick);\n\nfunction onSearchClick() {\n    btnSearch.style.display = \"none\";\n    formSearch.style.display = \"block\";\n    inputSearch.style.display = \"block\";\n    btn.style.display = \"block\";\n    \n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","//=== Подчеркивание активной ссылки на страницу\n\nlet currentPage = document.querySelector('body').getAttribute('data-current-page'); \n// console.log(currentPage)\nif (currentPage === \"index\") {\n  document.querySelector('.nav_link[href=\"./index.html\"]').classList.add('nav_link--current');  \n} else if (currentPage === \"favorite\") {\n  document.querySelector('.nav_link[href=\"./favorite.html\"]').classList.add('nav_link--current');  \n} else if (currentPage === \"read\") {\n  document.querySelector('.nav_link[href=\"./read.html\"]').classList.add('nav_link--current');  \n}\n","import createmarkup from './js/news-card';\nimport onSearchClick from './js/header';\nimport { ThemeSwitcher } from './js/themeSwitcher';\n\nconst newsContainerRef = document.querySelector('.news_container');\nconst withoutNewsContainer = document.querySelector('.without-news_container')\nconst body = document.querySelector('body');\nconst searchInput = document.querySelector('.search_form');\n\nlet markupAll = '';\n\nlet articleId = '';\nlet publishedDate = '';\nlet sectionName = '';\nlet articleTitle = '';\nlet shortDescription = '';\nlet urlOriginalArticle = '';\nlet imgUrl = '';\nlet totalNews = '';\nlet resultsArr = '';\nlet numberOfCard = 0;\n\n\nconst STORAGE_FAVORITES_KEY = 'favorites';\n\n\n//============= перемикач теми початок ==========\n\nconst themeSwitcherEl = document.querySelector('.switch_input');\nconst mobileSwitcherEl = document.querySelector('.switch_input--mobile');\n\nconst themeSwitcher = new ThemeSwitcher(themeSwitcherEl, mobileSwitcherEl);\n\nmobileSwitcherEl.addEventListener('change', themeSwitcher.onThemeToggle);\nthemeSwitcherEl.addEventListener('change', themeSwitcher.onThemeToggle);\n\nthemeSwitcher.renderTheme();\n//============= перемикач теми кінець ============\n\n// начало. переформатирование даты\nfunction publishedDateFormatter(date) {\n  return formatDate(new Date(date));\n}\n\nfunction formatDate(date) {\n  return [\n    padTo2Digits(date.getDate()),\n    padTo2Digits(date.getMonth() + 1),\n    date.getFullYear(),\n  ].join('/');\n}\n\nfunction padTo2Digits(num) {\n  return num.toString().padStart(2, '0');\n}\n// конец. переформатирование даты\n\n// Начало. Проверка на клик по Добавить в избранное\nfunction onAddToFavoritesClick(evt) {\n  if (evt.target.className === 'card__btn') {\n    const clickedArticleId =\n      evt.target.closest('.card')?.id ||\n      evt.target.closest('.card')?.slug_name ||\n      evt.target.closest('.card')?._id;\n    setFavoritesInLocalStor({\n      resultsArr,\n      clickedArticleId,\n    });\n  }\n}\n\n// Конец. Проверка на клик по Добавить в избранное\n\n//===добавляет избранное в локальное хранилище ==========\nfunction setFavoritesInLocalStor({ resultsArr, clickedArticleId }) {\n  resultsArr.forEach(article => {\n    if (\n      article.id == clickedArticleId ||\n      article.slug_name == clickedArticleId ||\n      article._id == clickedArticleId\n    ) {\n      let savedData = localStorage.getItem(STORAGE_FAVORITES_KEY);\n\n      // проверка или есть уже обьект\n      savedData = savedData ? JSON.parse(savedData) : {};\n\n      if (savedData[clickedArticleId]) {\n        delete savedData[`${clickedArticleId}`];\n\n        localStorage.setItem(STORAGE_FAVORITES_KEY, JSON.stringify(savedData));\n        return;\n      } else {\n        savedData[clickedArticleId] = article;\n\n        localStorage.setItem(STORAGE_FAVORITES_KEY, JSON.stringify(savedData));\n      }\n    }\n  });\n}\n//== добавляет избранное в локальное хранилище. конец ==========\n\n//=== Подчеркивание активной ссылки на страницу -- начало\n\nimport './js/currentPage'\n\n//=== Подчеркивание активной ссылки на страницу -- конец\n\n\n\n//======  Добавляет карточки новостей на страницу favorite  ======\n\n\nfunction addFavorite() {\n  const favorites = localStorage.getItem(STORAGE_FAVORITES_KEY);\n  \n  if (!favorites) {\n    withoutNewsContainer.style.display =\n    'block';\n\n  } else {\n    const parsedFavorites = JSON.parse(favorites);\n    const favoritesKeys = Object.keys(parsedFavorites);\n\n    for (const favoriteKey of favoritesKeys) {\n      const parsedFavorite = parsedFavorites[`${favoriteKey}`]\n      const { abstract, published_date, section, title, media, url, id } = parsedFavorite;\n\n      articleId = id;\n      publishedDate = publishedDateFormatter(published_date);\n      sectionName = section;\n      articleTitle = title;\n      shortDescription = abstract;\n      urlOriginalArticle = url;\n\n      try {\n        imgUrl = media[0]['media-metadata'][2].url;\n          \n      } catch (error) {\n        imgUrl = 'Тут ссылку на заглушку';\n      }\n      \n      newsContainerRef.innerHTML = markupAll += createmarkup({\n        publishedDate,\n        sectionName,\n        articleTitle,\n        shortDescription,\n        urlOriginalArticle,\n        imgUrl,\n        articleId,\n      });\n    }\n  }\n}\n\naddFavorite()\n\n","export class ThemeSwitcher {\n    constructor(deskSwitchEl, mobSwitchEl) {\n      this.themeSwitcherEl = deskSwitchEl;\n      this.mobileSwitcherEl = mobSwitchEl;\n      this.THEME_STORAGE_KEY = 'theme';\n      this.Theme = {\n        LIGHT: 'light',\n        DARK: 'dark',\n      };\n    }\n  \n    onThemeToggle = () => {\n      const isLightTheme = this.getBoolean();\n  \n      if (isLightTheme) {\n        localStorage.setItem(this.THEME_STORAGE_KEY, this.Theme.DARK);\n      }\n  \n      if (!isLightTheme) {\n        localStorage.setItem(this.THEME_STORAGE_KEY, this.Theme.LIGHT);\n      }\n  \n      this.renderTheme();\n      return;\n    };\n  \n    renderTheme() {\n      const isLightTheme = this.getBoolean();\n  \n      if (!isLightTheme) {\n        this.themeSwitcherEl.setAttribute('checked', true);\n        this.mobileSwitcherEl.setAttribute('checked', true);\n        this.changeBodyClass(this.Theme.DARK, this.Theme.LIGHT);\n      }\n  \n      if (isLightTheme) {\n        this.changeBodyClass(this.Theme.LIGHT, this.Theme.DARK);\n      }\n    }\n  \n    changeBodyClass(add, remove) {\n      document.body.classList.add(add);\n      document.body.classList.remove(remove);\n    }\n  \n    getBoolean() {\n      const storageTheme = localStorage.getItem(this.THEME_STORAGE_KEY);\n      return storageTheme === this.Theme.LIGHT || !storageTheme;\n    }\n  }\n  "],"names":["$0ff8bb512ff0da93$export$2e2bcd8739ae039","publishedDate","sectionName","articleTitle","shortDescription","urlOriginalArticle","imgUrl","articleId","textLength","length","spaceIndex","indexOf","slice","titleLength","$8aad853c076397e7$var$btnSearch","document","querySelector","$8aad853c076397e7$var$formSearch","$8aad853c076397e7$var$inputSearch","$8aad853c076397e7$var$btn","addEventListener","style","display","Object","defineProperty","$da4b248c00322402$exports","value","default","obj","key","enumerable","configurable","writable","$d26c2993504f4dee$var$currentPage","getAttribute","classList","add","$f2929da3ca31033d$var$newsContainerRef","$f2929da3ca31033d$var$withoutNewsContainer","$f2929da3ca31033d$var$markupAll","$f2929da3ca31033d$var$articleId","$f2929da3ca31033d$var$publishedDate","$f2929da3ca31033d$var$sectionName","$f2929da3ca31033d$var$articleTitle","$f2929da3ca31033d$var$shortDescription","$f2929da3ca31033d$var$urlOriginalArticle","$f2929da3ca31033d$var$imgUrl","$f2929da3ca31033d$var$themeSwitcherEl","$f2929da3ca31033d$var$mobileSwitcherEl","$f2929da3ca31033d$var$themeSwitcher","renderTheme","isLightTheme","this","getBoolean","themeSwitcherEl","setAttribute","mobileSwitcherEl","changeBodyClass","Theme","DARK","LIGHT","remove","body","storageTheme","localStorage","getItem","THEME_STORAGE_KEY","constructor","deskSwitchEl","mobSwitchEl","$parcel$interopDefault","setItem","$f2929da3ca31033d$var$publishedDateFormatter","date","$f2929da3ca31033d$var$padTo2Digits","getDate","getMonth","getFullYear","join","$f2929da3ca31033d$var$formatDate","Date","num","toString","padStart","onThemeToggle","favorites","parsedFavorites","JSON","parse","favoritesKeys","keys","favoriteKey","parsedFavorite","abstract","published_date","section","title","media","url","id","error","innerHTML","$f2929da3ca31033d$var$addFavorite"],"version":3,"file":"favorite.d6748982.js.map"}
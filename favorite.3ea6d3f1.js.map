{"mappings":"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","sources":["src/js/news-card.js","src/js/header.js","node_modules/@swc/helpers/lib/_define_property.js","src/js/publishedDateFormatter.js","src/js/setFavoritesInLocalStore.js","src/favorite.js","src/js/themeSwitcher.js"],"sourcesContent":["const STORAGE_FAVORITES_KEY = 'favorites';\n\nexport default function createmarkup({\n  publishedDate,\n  sectionName,\n  articleTitle,\n  shortDescription,\n  urlOriginalArticle,\n  imgUrl,\n  articleId,\n}) {\n  let textLength = shortDescription;\n  if (shortDescription.length > 110) {\n    const spaceIndex = shortDescription.indexOf(' ', 110);\n    if (spaceIndex > 0) {\n      textLength = shortDescription.slice(0, spaceIndex) + '...';\n    }\n  }\n  let titleLength = articleTitle;\n  if (articleTitle.length > 58) {\n    const spaceIndex = articleTitle.indexOf(' ', 44);\n    if (spaceIndex > 0) {\n      titleLength = articleTitle.slice(0, spaceIndex) + '...';\n    }\n  }\n  // проверка или новость есть в локальном избранное\nlet favoritesBtnText = \"Add to favorite\"\n  const favorites = localStorage.getItem(STORAGE_FAVORITES_KEY);\n  if (favorites) {\n    const parsedFavorites = JSON.parse(favorites);\n    const favoritesKeys = Object.keys(parsedFavorites);\n    for (const favoriteKey of favoritesKeys) {\n      const parsedFavorite = parsedFavorites[`${favoriteKey}`];\n      const { id, _id, slug_name } = parsedFavorite;\n\n      const articleIdInFavorites = id || _id || slug_name;\n      if (articleId === articleIdInFavorites) { favoritesBtnText = 'Remove from favorites' }\n    }\n  }\n\n  return `\n      <article class=\"card\" id=\"${articleId}\">\n        <div class=\"card__img-container\">\n          <img class=\"card__img\" src=\"${imgUrl}\" alt=\"${articleTitle}\">\n          <p class=\"card__section-name\">\n            ${sectionName}\n          </p>\n          <button class=\"card__btn\" type=\"button\">\n           ${favoritesBtnText}\n          </button>\n        </div>\n        <h2 class=\"card__title\">\n          ${titleLength}\n        </h2>\n        <p class=\"card__text\">${textLength}</p>\n        <div class=\"card__bottom\">\n          <span class=\"card__date\">\n            ${publishedDate}\n          </span>\n          <a class=\"card__read-more-search\"\n            href=\"${urlOriginalArticle}\" target=\"_blank\"\n          >\n            Read more\n          </a>\n        </div>\n      </article>\n    `;\n}\n","const btnSearch = document.querySelector(\".search_mob_btn\");\nconst formSearch = document.querySelector(\".search_form\");\nconst inputSearch = document.querySelector(\".search_input\");\nconst btn = document.querySelector(\".search_btn\");\n\nexport function onSearchClick() {\n    btnSearch.style.display = \"none\";\n    formSearch.style.display = \"block\";\n    inputSearch.style.display = \"block\";\n    btn.style.display = \"block\";\n    \n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","// начало. переформатирование даты\nexport default function publishedDateFormatter(date) {\n  return formatDate(new Date(date));\n}\n\nfunction formatDate(date) {\n  return [\n    padTo2Digits(date.getDate()),\n    padTo2Digits(date.getMonth() + 1),\n    date.getFullYear(),\n  ].join('/');\n}\n\nfunction padTo2Digits(num) {\n  return num.toString().padStart(2, '0');\n}\n// конецю переформатирование даты\n","//===добавляет избранное в локальное хранилище ==========\nexport default function setFavoritesInLocalStor({\n  resultsArr,\n  clickedArticleId,\n  evt,\n}) {\n  const STORAGE_FAVORITES_KEY = 'favorites';\n  resultsArr.forEach(article => {\n    if (\n      article.id == clickedArticleId ||\n      article.slug_name == clickedArticleId ||\n      article._id == clickedArticleId\n    ) {\n      let savedData = localStorage.getItem(STORAGE_FAVORITES_KEY);\n\n      // проверка или есть уже обьект\n      savedData = savedData ? JSON.parse(savedData) : {};\n\n      if (savedData[clickedArticleId]) {\n        delete savedData[`${clickedArticleId}`];\n\n        if ((evt.target.textContent.contains = 'Remove from favorites')) {\n          evt.target.textContent = 'Add to favorites';\n        }\n\n        localStorage.setItem(STORAGE_FAVORITES_KEY, JSON.stringify(savedData));\n        return;\n      } else {\n        savedData[clickedArticleId] = article;\n\n        localStorage.setItem(STORAGE_FAVORITES_KEY, JSON.stringify(savedData));\n      }\n    }\n  });\n}\n//== добавляет избранное в локальное хранилище. конец ==========\n","\nimport createmarkup from './js/news-card';\nimport onSearchClick from './js/header';\nimport { ThemeSwitcher } from './js/themeSwitcher';\nimport publishedDateFormatter from './js/publishedDateFormatter';\nimport setFavoritesInLocalStor from './js/setFavoritesInLocalStore';\n\n\nconst newsContainerRef = document.querySelector('.news_container');\nconst body = document.querySelector('body');\nconst searchInput = document.querySelector('.search_form');\nconst withoutNewsContainer = document.querySelector('.without-news_container');\nconst STORAGE_FAVORITES_KEY = 'favorites';\nlet markupAll = '';\n\nsearchInput.addEventListener('submit', onSearchInputClickAtFavorites);\n\nfunction onSearchInputClickAtFavorites(evt) {\n  evt.preventDefault()\n  const query = evt.target.elements.searchQuery.value\n  localStorage.setItem(\"searchQueryFromFavorites\", query)\nwindow.open('index.html', '_self')\n}\n\n\n//============= перемикач теми початок ==========\n\nconst themeSwitcherEl = document.querySelector('.switch_input');\nconst mobileSwitcherEl = document.querySelector('.switch_input--mobile');\n\nconst themeSwitcher = new ThemeSwitcher(themeSwitcherEl, mobileSwitcherEl);\n\nmobileSwitcherEl.addEventListener('change', themeSwitcher.onThemeToggle);\nthemeSwitcherEl.addEventListener('change', themeSwitcher.onThemeToggle);\n\nthemeSwitcher.renderTheme();\n//============= перемикач теми кінець ============\n\nbody.addEventListener('click', onAddToFavoritesClick);\nlet favoritesArrFedor = [];\n\nfunction addFavorite() {\n  const favorites = localStorage.getItem(STORAGE_FAVORITES_KEY);\n  \n  if (!favorites) {\n    withoutNewsContainer.style.display = 'flex';\n  } else {\n    const parsedFavorites = JSON.parse(favorites);\n    const favoritesKeys = Object.keys(parsedFavorites);\n    \n    for (const favoriteKey of favoritesKeys) {\n      const parsedFavorite = parsedFavorites[`${favoriteKey}`];\n       favoritesArrFedor.push(parsedFavorite);\n       const {\n         abstract,\n         published_date,\n         pub_date,\n        section,\n        section_name,\n        title,\n        headline,\n        media,\n        multimedia,\n        url,\n        web_url,\n        id,\n        _id,\n        slug_name,\n      } = parsedFavorite;\n      \n      const articleId = id || _id || slug_name;\n      const publishedDate = publishedDateFormatter(published_date || pub_date);\n      const sectionName = section || section_name;\n      const articleTitle = title || headline.main;\n      const shortDescription = abstract;\n      const urlOriginalArticle = url || web_url;\n      let imgUrl = '';\n      let imgLink = 'https://www.nytimes.com/';\n      \n      //   перевіряемо чи є зображення, де помилка там є відео\n      try {\n        if (articleId === id) {\n          imgUrl = media[0]['media-metadata'][2].url;\n        }\n        if (articleId === slug_name) {\n          imgUrl = multimedia[2].url;\n        }\n        if (articleId === _id) {\n          imgUrl = 'https://www.nytimes.com/' + multimedia[0].url;\n        }\n        \n        //   якщо треба інший розмір картинки\n        // console.log(media[0]['media-metadata']);\n      } catch (error) {\n        imgUrl =\n        'https://t4.ftcdn.net/jpg/00/89/55/15/240_F_89551596_LdHAZRwz3i4EM4J0NHNHy2hEUYDfXc0j.jpg';\n      }\n      \n      markupAll += createmarkup({\n        publishedDate,\n        sectionName,\n        articleTitle,\n        shortDescription,\n        urlOriginalArticle,\n        imgUrl,\n        articleId,\n      });\n    }\n    newsContainerRef.innerHTML = markupAll;\n  }\n}\n\naddFavorite();\n\nfunction onAddToFavoritesClick(evt) {\n  if (evt.target.className === 'card__btn') {\n    const clickedArticleId =\n    evt.target.closest('.card')?.id ||\n      evt.target.closest('.card')?.slug_name ||\n      evt.target.closest('.card')?._id;\n    const resultsArr = favoritesArrFedor;\n    if ((evt.target.textContent.contains = 'Add to favorites')) {\n      evt.target.textContent = 'Remove from favorites';\n    }\n    setFavoritesInLocalStor({\n      resultsArr,\n      clickedArticleId,\n      evt,\n    });\n  }\n}\n","export class ThemeSwitcher {\n    constructor(deskSwitchEl, mobSwitchEl) {\n      this.themeSwitcherEl = deskSwitchEl;\n      this.mobileSwitcherEl = mobSwitchEl;\n      this.dataSelected = document.querySelector(\".data_selected\");\n      this.currentPage = document.querySelector('body').getAttribute('data-current-page');\n      this.THEME_STORAGE_KEY = 'theme';\n      this.Theme = {\n        LIGHT: 'light',\n        DARK: 'dark',\n      };\n    }\n  \n    onThemeToggle = () => {\n      const isLightTheme = this.getBoolean();\n  \n      if (isLightTheme) {\n        localStorage.setItem(this.THEME_STORAGE_KEY, this.Theme.DARK);\n      }\n  \n      if (!isLightTheme) {\n        localStorage.setItem(this.THEME_STORAGE_KEY, this.Theme.LIGHT);\n      }\n  \n      this.renderTheme();\n      return;\n    };\n  \n    renderTheme() {\n      const isLightTheme = this.getBoolean();\n  \n      if (!isLightTheme) {\n        this.themeSwitcherEl.setAttribute('checked', true);\n        this.mobileSwitcherEl.setAttribute('checked', true);\n        this.changeBodyClass(this.Theme.DARK, this.Theme.LIGHT);\n        // console.log(this.dataSelected)\n        if (this.currentPage === \"index\") {\n          this.dataSelected.style.color = \"#F4F4F4\";\n        }\n      }\n  \n      if (isLightTheme) {\n        this.changeBodyClass(this.Theme.LIGHT, this.Theme.DARK);\n        if (this.currentPage === \"index\") {\n          this.dataSelected.style.color = \"#111321\";\n        }\n      }\n    }\n  \n    changeBodyClass(add, remove) {\n      document.body.classList.add(add);\n      document.body.classList.remove(remove);\n    }\n  \n    getBoolean() {\n      const storageTheme = localStorage.getItem(this.THEME_STORAGE_KEY);\n      return storageTheme === this.Theme.LIGHT || !storageTheme;\n    }\n  }\n  "],"names":["$0ff8bb512ff0da93$export$2e2bcd8739ae039","publishedDate","sectionName","articleTitle","shortDescription","urlOriginalArticle","imgUrl","articleId","textLength","length","spaceIndex","indexOf","slice","titleLength","favoritesBtnText","favorites","localStorage","getItem","parsedFavorites","JSON","parse","favoritesKeys","Object","keys","favoriteKey","parsedFavorite","id","_id","slug_name","document","querySelector","defineProperty","$da4b248c00322402$exports","value","default","obj","key","enumerable","configurable","writable","$adc5fb9a74f48046$export$2e2bcd8739ae039","date","$adc5fb9a74f48046$var$padTo2Digits","getDate","getMonth","getFullYear","join","$adc5fb9a74f48046$var$formatDate","Date","num","toString","padStart","$870e0a50c6c46fee$export$2e2bcd8739ae039","resultsArr","clickedArticleId","evt","STORAGE_FAVORITES_KEY","forEach","article","savedData","target","textContent","contains","setItem","stringify","$f2929da3ca31033d$var$newsContainerRef","$f2929da3ca31033d$var$body","$f2929da3ca31033d$var$searchInput","$f2929da3ca31033d$var$withoutNewsContainer","$f2929da3ca31033d$var$markupAll","addEventListener","preventDefault","query","elements","searchQuery","window","open","$f2929da3ca31033d$var$themeSwitcherEl","$f2929da3ca31033d$var$mobileSwitcherEl","$f2929da3ca31033d$var$themeSwitcher","renderTheme","isLightTheme","this","getBoolean","themeSwitcherEl","setAttribute","mobileSwitcherEl","changeBodyClass","Theme","DARK","LIGHT","currentPage","dataSelected","style","color","add","remove","body","classList","storageTheme","THEME_STORAGE_KEY","constructor","deskSwitchEl","mobSwitchEl","$parcel$interopDefault","getAttribute","onThemeToggle","className","closest","$f2929da3ca31033d$var$favoritesArrFedor","push","abstract","published_date","pub_date","section","section_name","title","headline","media","multimedia","url","web_url","main","error","innerHTML","display","$f2929da3ca31033d$var$addFavorite"],"version":3,"file":"favorite.3ea6d3f1.js.map"}